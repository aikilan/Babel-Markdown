{
  "name": "babel-md-viewer",
  "displayName": "%extension.displayName%",
  "description": "%extension.description%",
  "publisher": "BabelMarkdown",
  "author": "aikilan",
  "version": "1.2.5",
  "license": "MIT",
  "icon": "assets/icons/logo.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/aikilan/Babel-Markdown"
  },
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "main": "./dist/extension.js",
  "activationEvents": [
    "onLanguage:markdown",
    "onCommand:babelMdViewer.openPreview",
    "onCommand:babelMdViewer.refreshPreview",
    "onCommand:babelMdViewer.openTranslationPreview",
    "onCommand:babelMdViewer.refreshTranslationPreview",
    "onCommand:babelMdViewer.configureTranslationApiKey",
    "onCommand:babelMdViewer.exportMarkdownAsImage",
    "onCommand:babelMdViewer.exportMarkdownAsPdf"
  ],
  "contributes": {
    "commands": [
      {
        "command": "babelMdViewer.openPreview",
        "title": "%command.openPreview.title%",
        "category": "%command.category%"
      },
      {
        "command": "babelMdViewer.refreshPreview",
        "title": "%command.refreshPreview.title%",
        "category": "%command.category%"
      },
      {
        "command": "babelMdViewer.openTranslationPreview",
        "title": "%command.openTranslationPreview.title%",
        "category": "%command.category%",
        "icon": "$(globe)"
      },
      {
        "command": "babelMdViewer.refreshTranslationPreview",
        "title": "%command.refreshTranslationPreview.title%",
        "category": "%command.category%",
        "icon": "$(sync)"
      },
      {
        "command": "babelMdViewer.configureTranslationApiKey",
        "title": "%command.configureTranslationApiKey.title%",
        "category": "%command.category%"
      },
      {
        "command": "babelMdViewer.exportMarkdownAsImage",
        "title": "%command.exportMarkdownAsImage.title%",
        "category": "%command.category%"
      },
      {
        "command": "babelMdViewer.exportMarkdownAsPdf",
        "title": "%command.exportMarkdownAsPdf.title%",
        "category": "%command.category%"
      }
    ],
    "menus": {
      "editor/context": [
        {
          "command": "babelMdViewer.openTranslationPreview",
          "group": "navigation@2",
          "when": "resourceLangId == markdown"
        },
        {
          "command": "babelMdViewer.exportMarkdownAsImage",
          "group": "navigation@3",
          "when": "resourceLangId == markdown"
        },
        {
          "command": "babelMdViewer.exportMarkdownAsPdf",
          "group": "navigation@4",
          "when": "resourceLangId == markdown"
        }
      ],
      "editor/title": [
        {
          "command": "babelMdViewer.openTranslationPreview",
          "group": "navigation@2",
          "when": "resourceLangId == markdown"
        },
        {
          "command": "babelMdViewer.refreshTranslationPreview",
          "group": "navigation@3",
          "when": "resourceLangId == markdown"
        }
      ]
    },
    "configuration": {
      "type": "object",
      "title": "%configuration.title%",
      "properties": {
        "babelMdViewer.previewTheme": {
          "type": "string",
          "default": "light",
          "enum": [
            "light",
            "dark"
          ],
          "description": "%config.previewTheme.description%"
        },
        "babelMdViewer.transformPlugins": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "%config.transformPlugins.description%"
        },
        "babelMdViewer.translation.apiBaseUrl": {
          "type": "string",
          "default": "https://api.openai.com/v1",
          "markdownDescription": "%config.translation.apiBaseUrl.markdownDescription%"
        },
        "babelMdViewer.translation.apiKey": {
          "type": "string",
          "default": "",
          "markdownDescription": "%config.translation.apiKey.markdownDescription%"
        },
        "babelMdViewer.translation.model": {
          "type": "string",
          "default": "gpt-4o-mini",
          "markdownDescription": "%config.translation.model.markdownDescription%"
        },
        "babelMdViewer.translation.targetLanguage": {
          "type": "string",
          "default": "en",
          "markdownDescription": "%config.translation.targetLanguage.markdownDescription%"
        },
        "babelMdViewer.translation.timeoutMs": {
          "type": "number",
          "default": 30000,
          "minimum": 1000,
          "markdownDescription": "%config.translation.timeoutMs.markdownDescription%"
        },
        "babelMdViewer.translation.enableAdaptiveBatching": {
          "type": "boolean",
          "default": false,
          "markdownDescription": "%config.translation.enableAdaptiveBatching.markdownDescription%"
        },
        "babelMdViewer.translation.logSegmentMetrics": {
          "type": "boolean",
          "default": false,
          "markdownDescription": "%config.translation.logSegmentMetrics.markdownDescription%"
        },
        "babelMdViewer.translation.concurrencyLimit": {
          "type": "number",
          "default": 2,
          "minimum": 1,
          "markdownDescription": "%config.translation.concurrencyLimit.markdownDescription%"
        },
        "babelMdViewer.translation.parallelFallbackEnabled": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "%config.translation.parallelFallbackEnabled.markdownDescription%"
        },
        "babelMdViewer.translation.promptTemplate": {
          "type": "string",
          "default": "You are a professional {{targetLanguage}} native translator specialized in academic content who needs to fluently translate text into {{targetLanguage}}. ## Translation Rules 1. Output only the translated content, without explanations or additional content 2. Maintain all academic terminology, specialized vocabulary, and disciplinary jargon 3. If the text contains HTML tags, consider where the tags should be placed in the translation while maintaining fluency 4. Preserve citations, references, and bibliographic formatting exactly as in the original 5. Keep the formal academic tone, voice, and level of complexity 6. Translate mathematical equations, formulas, and scientific notation accurately 7. Ensure consistent translation of recurring technical terms throughout the document 8. If the input is entirely in {{targetLanguage}}, return it unchanged without paraphrasing or normalization 9. If the input is mixed-language, translate only the parts not already in {{targetLanguage}} and keep existing {{targetLanguage}} text exactly as-is 10. Do not translate language labels or navigation text such as \"English\", \"中文\", or \"English | 中文\"; keep them exactly as-is.",
          "markdownDescription": "%config.translation.promptTemplate.markdownDescription%"
        },
        "babelMdViewer.translation.retry.maxAttempts": {
          "type": "number",
          "default": 3,
          "minimum": 1,
          "markdownDescription": "%config.translation.retry.maxAttempts.markdownDescription%"
        }
      }
    }
  },
  "scripts": {
    "sync:prompts": "node scripts/sync-prompts.js",
    "vscode:prepublish": "pnpm run build",
    "typecheck": "tsc -p tsconfig.json --noEmit",
    "dev:server": "tsx server/index.ts",
    "build:extension": "vite build --config vite.config.extension.mjs",
    "build:webview": "vite build --config vite.config.webview.mjs && vite build --config vite.config.exportBridge.mjs",
    "build": "pnpm run sync:prompts && pnpm run typecheck && pnpm run build:extension && pnpm run build:webview",
    "compile": "pnpm run build",
    "vsc:package": "pnpm run build && pnpm exec vsce package --no-dependencies",
    "vsc:publish": "pnpm run vsc:package && pnpm exec vsce publish --no-dependencies",
    "compile-tests": "tsc -p tsconfig.test.json",
    "watch": "tsc -watch -p tsconfig.json",
    "watch-tests": "tsc -watch -p tsconfig.test.json",
    "lint": "eslint ./src ./test --ext .ts",
    "test": "npm run compile && npm run compile-tests && node ./dist-test/test/runTest.js",
    "check": "npm run lint && npm run test",
    "jb:setup": "bash jb/scripts/setup-env.sh",
    "jb:build": "bash jb/scripts/build-plugin.sh"
  },
  "devDependencies": {
    "@types/markdown-it": "^14.1.2",
    "@types/mocha": "^10.0.1",
    "@types/node": "^20.12.7",
    "@types/sanitize-html": "^2.16.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^7.1.0",
    "@typescript-eslint/parser": "^7.1.0",
    "@vscode/test-electron": "^2.3.4",
    "@vscode/vsce": "^3.6.2",
    "eslint": "^9.0.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-import": "^2.29.1",
    "mocha": "^10.2.0",
    "prettier": "^3.2.5",
    "tsx": "^4.15.7",
    "typescript": "^5.4.0",
    "vite": "^7.2.0"
  },
  "dependencies": {
    "html-to-image": "^1.11.13",
    "markdown-it": "^14.1.0",
    "pdf-lib": "^1.17.1",
    "sanitize-html": "^2.17.0"
  }
}
